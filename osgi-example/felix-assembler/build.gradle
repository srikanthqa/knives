apply plugin: 'java'
apply plugin: 'maven'

repositories {
	mavenLocal()
	mavenCentral()
}

configurations {
	felix
	bundle
	
	felix.transitive = false
	bundle.transitive = false
	
	json 
}

dependencies {
	felix group: 'org.apache.felix', name: 'org.apache.felix.main', version: felixVersion
	
	bundle group: 'org.apache.felix', name: 'org.apache.felix.webconsole', version: '4.2.4'
	bundle 'commons-fileupload:commons-fileupload:1.3.1'
	bundle 'commons-io:commons-io:2.4'
	
	json 'org.json:json:20141113'
}

task assembleBundle(type: Copy) {
	into "build/felix/bundle"
	from configurations.felix
}

task assembleFelix(type: Copy) {
	into "build/felix"
	from configurations.felix
}

task startFelix(type: JavaExec) {
	classpath = configurations.felix
	main = 'org.apache.felix.main.Main'
}