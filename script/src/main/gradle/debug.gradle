/**
 * Debugging tool for gradle build script
 */

// gradle "debug convention.plugins.base.distsDir"
// gradle "debug configurations"
// gradle "debug tasks.jar.outputs.files.files"
def String description = 'Pattern: "debug <gradle variable>": print the gradle variable'
tasks.addRule(description) { String taskName ->
final String prefix = "debug"
	if (taskName.startsWith(prefix) && taskName.length() > prefix.length() && !tasks.findByName(taskName)) {
		Task dummyTask = task(taskName)
		def script = 'return { println(' + (taskName-prefix) + ') }'
		def del = Eval.me(script)
		dummyTask << {
			del.setResolveStrategy Closure.DELEGATE_FIRST
			del.delegate = project
			println del()
		}
	}
}